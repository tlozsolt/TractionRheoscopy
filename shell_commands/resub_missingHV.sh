# /usr/bin/env bash
missingHV=(52 75 118 122 123 125 127 128 129 130 131 132 133 134 135 136 237 586 765 788 913 957 960 961 1064 1089 1167 1170 1378 1504 1557 1577 1589 1596 1644 1679 1731 1740 1741 1746 1757 1762 1768 1792 1793 1795 1816 1819 1836 1842 1846 1856 1859 1862 1863 1865 1868 1869 1870 1894 1950 1952 1970 1982 1995 2000 2012 2045 2063 2065 2074 2082 2100 2129 2130 2131 2132 2133 2165 2170 2171 2184 2189 2227 2233 2295 2305 2325 2326 2329 2338 2354 2360 2406 2416 2430 2431 2432 2441 2446 2449 2450 2456 2466 2468 2472 2492 2536 2557 2560 2561 2566 2568 2569 2570 2571 2573 2582 2584 2586 2594 2595 2606 2609 2611 2624 2656 2665 2668 2669 2671 2673 2677 2678 2690 2707 2708 2709 2713 2730 2740 2768 2769 2770 2772 2776 2777 2778 2807 2818 2821 2830 2834 2838 2841 2896 2910 2921 2925 2937 2953 2958 2959 2961 2973 2976 2989 3016 3018 3019 3037 3043 3067 3077 3082 3097 3115 3128 3133 3141 3145 3150 3151 3153 3154 3173 3174 3178 3181 3183 3187 3194 3196 3208 3209 3214 3226 3228 3239 3244 3245 3246 3256 3258 3263 3264 3268 3276 3277 3284 3285 3301 3302 3309 3328 3329 3331 3332 3333 3334 3335 3336 3337 3338 3339 3346 3356 3396 3406 3410 3413 3414 3416 3419 3429 3431 3442 3448 3450 3451 3452 3453 3454 3456 3458 3460 3461 3473 3481 3484 3502 3504 3514 3524 3546 3561 3577 3580 3588 3599 3608 3614 3620 3621 3622 3624 3629 3632 3642 3644 3653 3655 3660 3664 3673 3674 3678 3682 3683 3685 3687 3688 3692 3693 3694 3697 3704 3706 3707 3708 3709 3710 3712 3714 3715 3717 3720 3721 3722 3727 3728 3729 3734 3736 3737 3755 3760 3762 3764 3765 3769 3783 3786 3790 3791 3792 3796 3797 3798 3802 3805 3816 3818 3819 3827 3838 3846 3849 3850 3851 3852 3853 3854 3855 3856 3859 3868 3874 3884 3886 3887 3892 3897 3899 3900 3901 3904 3907 3915 3917 3918 3937 3943 3945 3950 3965 3969 3971 3973 3975 3976 3984 3990 3993 4009 4012 4016 4026 4029 4030 4039 4072 4075 4078 4081 4082 4086 4111 4115 4119 4134 4135 4136 4138 4142 4145 4147 4153 4156 4186 4188 4190 4209 4212 4229 4236 4239 4244 4246 4249 4250 4258 4259 4263 4272 4287 4291 4293 4301 4304 4323 4326 4337 4342 4345 4348 4357 4358 4360 4368 4369 4376 4382 4383 4385 4386 4389 4390 4394 4406 4408 4410 4411 4414 4415 4416 4417 4420 4421 4425 4429 4431 4433 4442 4443 4445 4451 4455 4456 4458 4459 4460 4465 4466 4467 4470 4474 4475 4476 4478 4479 4480 4482 4487 4494 4495 4496 4497 4498 4499 4500 4501 4503 4506 4508 4509 4512 4514 4515 4517 4519 4521 4525 4532 4534 4537 4538 4539 4544 4546 4547 4548 4549 4551 4553 4558 4559 4560 4569 4571 4575 4580 4581 4582 4586 4589 4596 4598 4600 4605 4606 4608 4612 4613 4614 4615 4617 4618 4623 4629 4630 4639 4640 4657 4667 4700 4702 4712 4713 4722 4724 4727 4728 4729 4744 4746 4749 4752 4758 4768 4769 4772 4776 4786 4787 4788 4789 4802 4809 4838 4842 4863 4870 4876 4882 4891 4912 4920 4925 4930 4932 4936 4947 4965 4972 4975 4981 4991 4999 5001 5007 5014 5015 5017 5019 5021 5024 5030 5033 5034 5036 5040 5044 5046 5047 5049 5050 5053 5056 5060 5062 5063 5065 5068 5077 5080 5083 5092 5093 5098 5100 5101 5102 5103 5106 5107 5108 5109 5110 5111 5116 5117 5120 5122 5125 5126 5127 5128 5131 5133 5134 5135 5136 5138 5143 5145 5146 5148 5149 5150 5154 5155 5156 5157 5163 5164 5165 5167 5168 5176 5177 5178 5182 5183 5184 5188 5189 5190 5191 5192 5193 5198 5209 5210 5217 5220 5221 5222 5223 5233 5236 5237 5238 5239 5243 5247 5248 5249 5267 5280 5282 5323 5371 5376 5391 5392 5393 5411 5435 5475 5535 5536 5550 5560 5569 5599 5611 5621 5622 5624 5628 5637 5638 5640 5641 5642 5647 5648 5660 5667 5674 5676 5687 5691 5695 5696 5699 5700 5701 5710 5711 5712 5713 5715 5716 5719 5721 5726 5744 5746 5747 5749 5751 5755 5756 5759 5763 5771 5774 5779 5780 5782 5786 5792 5799 5805 5807 5812 5814 5816 5818 5819 5845 5847 5848 5891 5944 5981 5985 5986 6001 6012 6013 6019 6043 6045 6055 6074 6080 6081 6085 6088 6089 6106 6108 6109 6111 6113 6131 6135 6137 6140 6148 6177 6188 6201 6209 6211 6226 6235 6241 6247 6250 6252 6255 6264 6266 6267 6272 6277 6288 6289 6291 6293 6294 6295 6296 6297 6298 6316 6321 6325 6333 6334 6337 6345 6348 6356 6357 6358 6360 6361 6371 6377 6388 6391 6396 6402 6405 6410 6412 6415 6416 6417 6418 6419 6420 6421 6422 6423 6424 6425 6432 6434 6435 6437 6440 6441 6450 6454 6455 6458 6476 6481 6482 6484 6485 6488 6489 6496 6497 6498 6499 6502 6507 6516 6518 6519 6524 6529 6530 6531 6532 6533 6535 6539 6552 6554 6555 6560 6561 6563 6564 6568 6577 6578 6580 6581 6583 6584 6585 6586 6588 6589 6593 6596 6597 6599 6601 6603 6604 6605 6607 6609 6611 6614 6615 6617 6618 6619 6620 6622 6624 6628 6630 6634 6635 6639 6640 6641 6646 6652 6654 6655 6658 6659 6667 6670 6671 6672 6676 6678 6680 6681 6682 6683 6684 6685 6693 6694 6695 6696 6699 6704 6705 6709 6711 6713 6715 6716 6729 6731 6732 6735 6740 6744 6749 6757 6779 6784 6812 6824 6828 6840 6845 6846 6854 6871 6873 6881 6882 6891 6892 6903 6906 6907 6909 6917 6922 6923 6936 6944 6977 6987 7017 7029 7030 7031 7032 7033 7034 7035 7036 7038 7039 7051 7053 7054 7055 7058 7060 7061 7062 7078 7079 7081 7086 7090 7104 7112 7164 7168 7171 7176 7185 7198 7199 7201 7205 7208 7209 7225 7228 7229 7234 7235 7236 7237 7238 7240 7241 7242 7244 7245 7251 7252 7253 7255 7257 7258 7259 7260 7261 7262 7263 7264 7265 7266 7267 7270 7271 7272 7273 7274 7275 7276 7277 7278 7279 7280 7281 7282 7283 7284 7285 7286 7287 7288 7289 7290 7291 7292 7295 7296 7297 7298 7299 7302 7308 7309 7310 7311 7312 7313 7320 7323 7334 7337 7357 7359 7362 7405 7427 7431 7433 7436 7441 7446 7447 7451 7452 7454 7464 7469 7470 7476 7482 7486 7489 7502 7523 7530 7531 7532 7533 7534 7535 7539 7548 7551 7552 7560 7563 7573 7575 7581 7583 7585 7589 7590 7591 7593 7594 7595 7596 7601 7602 7604 7610 7611 7621 7640 7645 7802 7814 7818 7820 7822 7839 7963 8003 8014 8019 8035 8043 8046 8047 8054 8056 8058 8062 8065 8096 8097 8100 8121 8122 8136 8144 8145 8156 8174 8180 8194 8196 8208 8222 8224 8225 8234 8235 8236 8240 8245 8246 8248 8253 8254 8255 8256 8258 8259 8261 8264 8268 8273 8298 8342 8351 8358 8360 8362 8364 8366 8367 8373 8376 8377 8378 8379 8380 8381 8382 8384 8385 8388 8390 8392 8394 8397 8399 8402 8404 8405 8408 8411 8414 8416 8417 8418 8420 8422 8431 8432 8434 8435 8436 8439 8441 8442 8443 8445 8447 8448 8449 8450 8451 8452 8453 8456 8459 8460 8462 8463 8464 8465 8466 8467 8468 8469 8470 8471 8474 8476 8477 8482 8483 8484 8488 8493 8494 8495 8498 8500 8501 8502 8503 8504 8506 8507 8508 8509 8510 8511 8512 8513 8517 8518 8519 8524 8527 8528 8529 8535 8536 8537 8540 8548 8550 8557 8564 8569 8596 8606 8611 8620 8624 8632 8635 8636 8640 8643 8653 8674 8684 8685 8689 8697 8699 8703 8704 8705 8711 8712 8723 8725 8733 8734 8736 8742 8743 8744 8745 8752 8757 8761 8765 8777 8778 8780 8782 8801 8807 8808 8815 8826 8828 8831 8839 8840 8841 8851 8860 8865 8868 8889 8905 8909 8910 8913 8914 8921 8922 8927 8929 8938 8939 8960 8961 8962 8991 8993 9015 9016 9019 9024 9025 9036 9037 9042 9045 9048 9049 9055 9056 9059 9080 9088 9093 9100 9101 9105 9116 9119 9120 9121 9123 9130 9131 9138 9141 9145 9146 9147 9154 9158 9159 9166 9168 9170 9172 9173 9174 9175 9187 9190 9193 9199 9201 9205 9208 9209 9212 9214 9220 9221 9228 9231 9242 9243 9245 9246 9247 9248 9249 9262 9268 9271 9273 9274 9280 9289 9290 9292 9293 9295 9297 9314 9317 9319 9323 9324 9326 9332 9334 9344 9345 9347 9353 9357 9364 9394 9412 9433 9434 9449 9458 9459 9460 9472 9485 9486 9496 9516 9542 9545 9546 9550 9556 9565 9568 9569 9585 9586 9597 9605 9609 9612 9613 9621 9631 9633 9634 9638 9647 9655 9661 9692 9730 9751 9768 9769 9773 9782 9789 9793 9799 9802 9824 9827 9835 9844 9845 9850 9852 9856 9857 9858 9860 9868 9871 9876 9888 9898 9914 9916 9922 9925 9932 9948 9974 9986 10176 10197 10198 10199 10200 10201 10202 10203 10204 10272 10445 10457 10458 10499 10500 10514 10650 10688 10846 10847 11051 11052 11075 11250)
echo "${missingHV[377]}"

# basic idea is to run to get a printout of all incomplete jobs (logs that dont contain 'particles'
grep -L 'particles: ' *.yaml | cut -d'_' -f4 | cut -d '.' -f1 | cut -c 3- | awk '{printf "%s ", $0 + 0}' > buf

# create a bash array of these indices by copying the output of buf into new bash variable to get something like this:
missingHV=(52 75 118 122 123 125 127 128 129 130 131 132 133 134 135 136 237 586 765 788 913 957 960 961 1064 1089 1167 1170 1378 1504 1557 1577 1589 1596 1644 1679 1731 1740 1741 1746 1757 1762 1768 1792 1793 1795 1816 1819 1836 1842 1846 1856 1859 1862 1863 1865 1868 1869 1870 1894 1950 1952 1970 1982 1995 2000 2012 2045 2063 2065 2074 2082 2100 2129 2130 2131 2132 2133 2165 2170 2171 2184 2189 2227 2233 2295 2305 2325 2326 2329 2338 2354 2360 2406 2416 2430 2431 2432 2441 2446 2449 2450 2456 2466 2468 2472 2492 2536 2557 2560 2561 2566 2568 2569 2570 2571 2573 2582 2584 2586 2594 2595 2606 2609 2611 2624 2656 2665 2668 2669 2671 2673 2677 2678 2690 2707 2708 2709 2713 2730 2740 2768 2769 2770 2772 2776 2777 2778 2807 2818 2821 2830 2834 2838 2841 2896 2910 2921 2925 2937 2953 2958 2959 2961 2973 2976 2989 3016 3018 3019 3037 3043 3067 3077 3082 3097 3115 3128 3133 3141 3145 3150 3151 3153 3154 3173 3174 3178 3181 3183 3187 3194 3196 3208 3209 3214 3226 3228 3239 3244 3245 3246 3256 3258 3263 3264 3268 3276 3277 3284 3285 3301 3302 3309 3328 3329 3331 3332 3333 3334 3335 3336 3337 3338 3339 3346 3356 3396 3406 3410 3413 3414 3416 3419 3429 3431 3442 3448 3450 3451 3452 3453 3454 3456 3458 3460 3461 3473 3481 3484 3502 3504 3514 3524 3546 3561 3577 3580 3588 3599 3608 3614 3620 3621 3622 3624 3629 3632 3642 3644 3653 3655 3660 3664 3673 3674 3678 3682 3683 3685 3687 3688 3692 3693 3694 3697 3704 3706 3707 3708 3709 3710 3712 3714 3715 3717 3720 3721 3722 3727 3728 3729 3734 3736 3737 3755 3760 3762 3764 3765 3769 3783 3786 3790 3791 3792 3796 3797 3798 3802 3805 3816 3818 3819 3827 3838 3846 3849 3850 3851 3852 3853 3854 3855 3856 3859 3868 3874 3884 3886 3887 3892 3897 3899 3900 3901 3904 3907 3915 3917 3918 3937 3943 3945 3950 3965 3969 3971 3973 3975 3976 3984 3990 3993 4009 4012 4016 4026 4029 4030 4039 4072 4075 4078 4081 4082 4086 4111 4115 4119 4134 4135 4136 4138 4142 4145 4147 4153 4156 4186 4188 4190 4209 4212 4229 4236 4239 4244 4246 4249 4250 4258 4259 4263 4272 4287 4291 4293 4301 4304 4323 4326 4337 4342 4345 4348 4357 4358 4360 4368 4369 4376 4382 4383 4385 4386 4389 4390 4394 4406 4408 4410 4411 4414 4415 4416 4417 4420 4421 4425 4429 4431 4433 4442 4443 4445 4451 4455 4456 4458 4459 4460 4465 4466 4467 4470 4474 4475 4476 4478 4479 4480 4482 4487 4494 4495 4496 4497 4498 4499 4500 4501 4503 4506 4508 4509 4512 4514 4515 4517 4519 4521 4525 4532 4534 4537 4538 4539 4544 4546 4547 4548 4549 4551 4553 4558 4559 4560 4569 4571 4575 4580 4581 4582 4586 4589 4596 4598 4600 4605 4606 4608 4612 4613 4614 4615 4617 4618 4623 4629 4630 4639 4640 4657 4667 4700 4702 4712 4713 4722 4724 4727 4728 4729 4744 4746 4749 4752 4758 4768 4769 4772 4776 4786 4787 4788 4789 4802 4809 4838 4842 4863 4870 4876 4882 4891 4912 4920 4925 4930 4932 4936 4947 4965 4972 4975 4981 4991 4999 5001 5007 5014 5015 5017 5019 5021 5024 5030 5033 5034 5036 5040 5044 5046 5047 5049 5050 5053 5056 5060 5062 5063 5065 5068 5077 5080 5083 5092 5093 5098 5100 5101 5102 5103 5106 5107 5108 5109 5110 5111 5116 5117 5120 5122 5125 5126 5127 5128 5131 5133 5134 5135 5136 5138 5143 5145 5146 5148 5149 5150 5154 5155 5156 5157 5163 5164 5165 5167 5168 5176 5177 5178 5182 5183 5184 5188 5189 5190 5191 5192 5193 5198 5209 5210 5217 5220 5221 5222 5223 5233 5236 5237 5238 5239 5243 5247 5248 5249 5267 5280 5282 5323 5371 5376 5391 5392 5393 5411 5435 5475 5535 5536 5550 5560 5569 5599 5611 5621 5622 5624 5628 5637 5638 5640 5641 5642 5647 5648 5660 5667 5674 5676 5687 5691 5695 5696 5699 5700 5701 5710 5711 5712 5713 5715 5716 5719 5721 5726 5744 5746 5747 5749 5751 5755 5756 5759 5763 5771 5774 5779 5780 5782 5786 5792 5799 5805 5807 5812 5814 5816 5818 5819 5845 5847 5848 5891 5944 5981 5985 5986 6001 6012 6013 6019 6043 6045 6055 6074 6080 6081 6085 6088 6089 6106 6108 6109 6111 6113 6131 6135 6137 6140 6148 6177 6188 6201 6209 6211 6226 6235 6241 6247 6250 6252 6255 6264 6266 6267 6272 6277 6288 6289 6291 6293 6294 6295 6296 6297 6298 6316 6321 6325 6333 6334 6337 6345 6348 6356 6357 6358 6360 6361 6371 6377 6388 6391 6396 6402 6405 6410 6412 6415 6416 6417 6418 6419 6420 6421 6422 6423 6424 6425 6432 6434 6435 6437 6440 6441 6450 6454 6455 6458 6476 6481 6482 6484 6485 6488 6489 6496 6497 6498 6499 6502 6507 6516 6518 6519 6524 6529 6530 6531 6532 6533 6535 6539 6552 6554 6555 6560 6561 6563 6564 6568 6577 6578 6580 6581 6583 6584 6585 6586 6588 6589 6593 6596 6597 6599 6601 6603 6604 6605 6607 6609 6611 6614 6615 6617 6618 6619 6620 6622 6624 6628 6630 6634 6635 6639 6640 6641 6646 6652 6654 6655 6658 6659 6667 6670 6671 6672 6676 6678 6680 6681 6682 6683 6684 6685 6693 6694 6695 6696 6699 6704 6705 6709 6711 6713 6715 6716 6729 6731 6732 6735 6740 6744 6749 6757 6779 6784 6812 6824 6828 6840 6845 6846 6854 6871 6873 6881 6882 6891 6892 6903 6906 6907 6909 6917 6922 6923 6936 6944 6977 6987 7017 7029 7030 7031 7032 7033 7034 7035 7036 7038 7039 7051 7053 7054 7055 7058 7060 7061 7062 7078 7079 7081 7086 7090 7104 7112 7164 7168 7171 7176 7185 7198 7199 7201 7205 7208 7209 7225 7228 7229 7234 7235 7236 7237 7238 7240 7241 7242 7244 7245 7251 7252 7253 7255 7257 7258 7259 7260 7261 7262 7263 7264 7265 7266 7267 7270 7271 7272 7273 7274 7275 7276 7277 7278 7279 7280 7281 7282 7283 7284 7285 7286 7287 7288 7289 7290 7291 7292 7295 7296 7297 7298 7299 7302 7308 7309 7310 7311 7312 7313 7320 7323 7334 7337 7357 7359 7362 7405 7427 7431 7433 7436 7441 7446 7447 7451 7452 7454 7464 7469 7470 7476 7482 7486 7489 7502 7523 7530 7531 7532 7533 7534 7535 7539 7548 7551 7552 7560 7563 7573 7575 7581 7583 7585 7589 7590 7591 7593 7594 7595 7596 7601 7602 7604 7610 7611 7621 7640 7645 7802 7814 7818 7820 7822 7839 7963 8003 8014 8019 8035 8043 8046 8047 8054 8056 8058 8062 8065 8096 8097 8100 8121 8122 8136 8144 8145 8156 8174 8180 8194 8196 8208 8222 8224 8225 8234 8235 8236 8240 8245 8246 8248 8253 8254 8255 8256 8258 8259 8261 8264 8268 8273 8298 8342 8351 8358 8360 8362 8364 8366 8367 8373 8376 8377 8378 8379 8380 8381 8382 8384 8385 8388 8390 8392 8394 8397 8399 8402 8404 8405 8408 8411 8414 8416 8417 8418 8420 8422 8431 8432 8434 8435 8436 8439 8441 8442 8443 8445 8447 8448 8449 8450 8451 8452 8453 8456 8459 8460 8462 8463 8464 8465 8466 8467 8468 8469 8470 8471 8474 8476 8477 8482 8483 8484 8488 8493 8494 8495 8498 8500 8501 8502 8503 8504 8506 8507 8508 8509 8510 8511 8512 8513 8517 8518 8519 8524 8527 8528 8529 8535 8536 8537 8540 8548 8550 8557 8564 8569 8596 8606 8611 8620 8624 8632 8635 8636 8640 8643 8653 8674 8684 8685 8689 8697 8699 8703 8704 8705 8711 8712 8723 8725 8733 8734 8736 8742 8743 8744 8745 8752 8757 8761 8765 8777 8778 8780 8782 8801 8807 8808 8815 8826 8828 8831 8839 8840 8841 8851 8860 8865 8868 8889 8905 8909 8910 8913 8914 8921 8922 8927 8929 8938 8939 8960 8961 8962 8991 8993 9015 9016 9019 9024 9025 9036 9037 9042 9045 9048 9049 9055 9056 9059 9080 9088 9093 9100 9101 9105 9116 9119 9120 9121 9123 9130 9131 9138 9141 9145 9146 9147 9154 9158 9159 9166 9168 9170 9172 9173 9174 9175 9187 9190 9193 9199 9201 9205 9208 9209 9212 9214 9220 9221 9228 9231 9242 9243 9245 9246 9247 9248 9249 9262 9268 9271 9273 9274 9280 9289 9290 9292 9293 9295 9297 9314 9317 9319 9323 9324 9326 9332 9334 9344 9345 9347 9353 9357 9364 9394 9412 9433 9434 9449 9458 9459 9460 9472 9485 9486 9496 9516 9542 9545 9546 9550 9556 9565 9568 9569 9585 9586 9597 9605 9609 9612 9613 9621 9631 9633 9634 9638 9647 9655 9661 9692 9730 9751 9768 9769 9773 9782 9789 9793 9799 9802 9824 9827 9835 9844 9845 9850 9852 9856 9857 9858 9860 9868 9871 9876 9888 9898 9914 9916 9922 9925 9932 9948 9974 9986 10176 10197 10198 10199 10200 10201 10202 10203 10204 10272 10445 10457 10458 10499 10500 10514 10650 10688 10846 10847 11051 11052 11075 11250)

# then set the slurm array index to be the right range for the length of the list
# SLURM --array=0-1232

# and finally use slurm keyword as index to missingHV
HASHVALUE=${missingHV[SLURM_ARRAY_TASK_ID]}

# and the rest of the submit script is unchanged.

# nice hack
# save grep command to script findMissing.sh
#in vim execute this to read missing lines into buffer
>>> :r !./findMissing.sh
